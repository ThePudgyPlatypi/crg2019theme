$navHeight: 130px + 15px;

// ========================
// navigation
// ========================
   
.site-header {
    @include flex();
    @include flex-align($y: bottom);

    // Sticky Style
    &.sticky {
        @include flex;
        @include flex-align($y: top);
        height: 80px;
        position: fixed;
        width: 100%;
        top: 0;
        padding: 0;
        z-index: 10;

        .grid-container .desktop-nav {
            height: initial;

            .site-branding {
                display: none; 

                @include breakpoint(middle) {
                    @include xy-cell(2);
                    display: flex;
                }

                img {
                    position: absolute;
                    transform-origin: center;
                    transition: all 0.2s;
                    margin-top: 23px;

                    & a:hover img,
                    & a:focus img {
                        transform: scale(1.2);
                    }
                }
            }

            & .main-navigation .primary-menu .menu .menu-item-has-children:hover > .sub-menu {
                transform: translateY(0);
                margin: auto;
                top: initial;
                padding: 10px 0 80px 0;
                background: url(../../../../../uploads/2018/05/grid_1.png) repeat, linear-gradient(to bottom, rgba(48,48,48,1) 1%,rgba(48,48,48,1) 50%,rgba(48,48,48,0.5) 80%,rgba(48,48,48,0) 100%); /* W3C, IE10+, FF16+, Chrome26+, Opera12+, Safari7+ */
                filter: progid:DXImageTransform.Microsoft.gradient( startColorstr='#00303030', endColorstr='#303030',GradientType=0 ); /* IE6-9 */

                li:first-child {
                    margin-top: 0;
                }
            };
    
            & .main-navigation .primary-menu .menu .menu-item-has-children {
                &:hover,
                &:focus  {
                    & > li::after {
                        transform: translateY(10px);
                    }

                    & a:before {
                        transform: rotate(180deg) !important;
                    }
                }
            }
        }
    }

    .grid-container {
        width: 100%;
        position: relative;

        .desktop-nav {
            @include xy-grid();
            background-color: white;
            height: 130px;
            width: 100%;


            &#mobile-switch {
                display: none;

                @include breakpoint(medium) {
                    display: flex;
                }
            }

            .site-branding {
                display: none;

                @include breakpoint(middle) {
                    @include xy-cell(2);
                    display: flex;
                }

                img {
                    width: 100px;
                    height: auto;
                    transform-origin: center;
                    transition: all 0.2s;

                    @include breakpoint(large) {
                        width: 150px;
                    }
                }

                & a:hover img,
                & a:focus img {
                    transform: scale(1.2);
                }
            }

            // #site-navigation
            .main-navigation {
                @include xy-cell(12);
                text-align: center;

                @include breakpoint(middle) {
                    @include xy-cell(10);
                }
                
                // #primary menu
                .primary-menu {
                    @include xy-grid;

                    ul.menu {
                        @include xy-cell(12);
                        @include flex;
                        @include flex-align($x: center);

                        @include breakpoint(middle) {
                            @include flex-align($x: right);
                        }
            
                        // lil yellow bars under each item
                        &:first-child {
                            & > li {
                                text-transform: uppercase;

                                @include breakpoint(medium) {
                                    font-size: 0.50rem;
                                }

                                @include breakpoint(large) {
                                    font-size: 0.8rem;
                                }

                                @include breakpoint(xlarge) {
                                    font-size: 1.05rem;
                                }

                                @include breakpoint(xxlarge) {
                                    font-size: 1.15rem;
                                }

                                &.is-active:after,
                                &:after {
                                    position: relative;
                                    z-index: 10;
                                    content: "";
                                    display: block;
                                    opacity: 0;
                                    transform: translateY(20px);
                                    width: 100%;
                                    height: 5px;
                                    background-color: #ffc52a;
                                    transition: all 0.2s cubic-bezier(0.39, 0.575, 0.565, 1);
                                }
                                
                                &.is-active > a {
                                    background-color: initial;
                                }

                                &:hover,
                                &:focus,
                                &.is-active {
                                    &:after {
                                        transform: translateY(0px);
                                        opacity: 1;
                                    }
                                }
                            }
                        }
        
                        
                        li {
                            list-style: none;
                            padding-top: 14px;
                            margin-top: -4px;
        
                            &.menu-item-has-children {
                                position: relative;
                                text-align: center;
                                
                                & > a:before {
                                    content: "";
                                    display: inline-block;
                                    margin-right: 10px;
                                    width: 0; 
                                    height: 0; 
                                    border-left: 4px solid transparent;
                                    border-right: 4px solid transparent;
                                    border-bottom: 6px solid #ffc52a;
                                    transition: transform 0.2s cubic-bezier(0.39, 0.575, 0.565, 1);
                                    transition: transform 0.2s cubic-bezier(0.39, 0.575, 0.565, 1), -webkit-transform 0.2s cubic-bezier(0.39, 0.575, 0.565, 1);

                                    @include breakpoint(large) {
                                        border-left: 8px solid transparent;
                                        border-right: 8px solid transparent;
                                        border-bottom: 12px solid #ffc52a;
                                    }
                                }
        
                                &:hover > ul {
                                    transform: translateY(-100%);
                                    display: block;
                                }
        
                                &:hover a:before {
                                    transform: translateY(-5px);
                                }

                                // drop down box
                                .sub-menu {
                                    display: none;
                                    position: absolute;
                                    top: 0;
                                    min-width: 200px;
                                    z-index: 10;
                                    margin: 0;
                                    background: url(../../../../../uploads/2018/05/grid_1.png) repeat, -webkit-linear-gradient(top, rgba(48,48,48,0) 1%,rgba(48,48,48,0) 7%,rgba(48,48,48,1) 57%,rgba(48,48,48,1) 100%); /* Chrome10-25,Safari5.1-6 */
                                    background: url(../../../../../uploads/2018/05/grid_1.png) repeat, -webkit-gradient(linear, left top, left bottom, color-stop(1%, rgba(48,48,48,0)),color-stop(7%, rgba(48,48,48,0)),color-stop(57%, rgba(48,48,48,1)),to(rgba(48,48,48,1)));
                                    background: url(../../../../../uploads/2018/05/grid_1.png) repeat, -o-linear-gradient(top, rgba(48,48,48,0) 1%,rgba(48,48,48,0) 7%,rgba(48,48,48,1) 57%,rgba(48,48,48,1) 100%);
                                    background: url(../../../../../uploads/2018/05/grid_1.png) repeat, linear-gradient(to bottom, rgba(48,48,48,0) 1%,rgba(48,48,48,0) 7%,rgba(48,48,48,1) 57%,rgba(48,48,48,1) 100%); /* W3C, IE10+, FF16+, Chrome26+, Opera12+, Safari7+ */
                                    filter: progid:DXImageTransform.Microsoft.gradient( startColorstr='#00303030', endColorstr='#303030',GradientType=0 ); /* IE6-9 */

                                    li {
                                        background-color: initial;
                                        text-align: center;
                                        padding: 10px 0 10px 0;
                                        font-size: .65rem;

                                        @include breakpoint(medium) {
                                            font-size: .65rem;

                                            & .sub-menu {
                                                font-size: .65rem;
                                            }
                                        }

                                        @include breakpoint(middle) {
                                            font-size: .75rem;

                                            & .sub-menu {
                                                font-size: .75rem;
                                            }
                                        }

                                        @include breakpoint(large) {
                                            font-size: 1rem;

                                            & .sub-menu {
                                                font-size: 1rem;
                                            }
                                        }

                                        &.is-active a {
                                            background-color: transparent;
                                        }
            
                                        &:first-child {
                                            margin-top: 40px;
                                        }
            
                                        a {
                                            color: white;
                                            transition: all 0.2s;
                                            
            
                                            &:hover,
                                            &:focus {
                                                transform: scale(1.1, 1.1); 
                                                transform-origin: 50% 50%;
                                            }
                                        }
                                    }
                                }
                            }
        
                            a {
                                width: 100%;
                                height: 100%;
                                color: #313131;
                            }
        
                            &:hover,
                            &:focus {
        
                                &:before {
                                    transform: translateY(-5px);
                                }
                            }
                        }
                    }
                } 
            }
        }
    }

    .mobile-nav, .mobile-nav-center {
        display: block;

        @include breakpoint(medium) {
            display: none;
        }
    }
}

// Team navigation
.menu-team-nav-container {
    display: flex;
    justify-content: center;
    padding: 10px 0;
}